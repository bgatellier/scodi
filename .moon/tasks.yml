$schema: 'https://moonrepo.dev/schemas/tasks.json'
tasks:
  build:
    command: tsc --project tsconfig.build.json
    deps:
      # build dependent projects
      - ^:build
    inputs:
      - 'src/**/*'
      - 'package.json'
      - 'tsconfig*.json'
    outputs:
      - 'lib'
  check:
    command: biome check
    options:
      runFromWorkspaceRoot: true
  test:
    command: vitest run
    deps:
      - target: build
  coverage:
    extends: test
    args: '--coverage'
  publish:
    command: pnpm jsr publish
